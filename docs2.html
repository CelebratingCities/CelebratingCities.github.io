<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <title>Uber's Celebrating Cities Hackathon</title>

    <!-- Favicon -->
    <link href="img/uber-favicon.png" rel="shortcut icon" type="image/x-icon" />

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/added_style.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- Mapbox docs -->
    <script src='js/mapbox-gl.js'></script>
    <link href='css/mapbox-gl.css' rel='stylesheet' />

    <!-- Fonts -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <!--<link href='https://fonts.googleapis.com/css?family=Lato:400,300' rel='stylesheet' type='text/css'>-->
    <link rel="stylesheet" href="css/uber-fonts.css">

</head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">Celebrating Cities</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <div class="navbar-form navbar-right expanding-sf">
                <div class="form"> <span class="toggle"></span>
                    <form role="search" method="get" id="searchform" action="javascript: search()">
                        <input type="text" placeholder="Search Datasets" id="s" name="s" value="">
                        <input type="submit" value="" id="searchsubmit">
                    </form>
                </div>
            </div>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="index.html">Home<span class="sr-only">(current)</span></a></li>
                <li><a href="intro.html">Intro</a></li>
                <li><a href="https://celebratingcities.data.socrata.com/">Data</a></li>
                <!--<li><a href="http://celebratingcities.deloittegeo.opendata.arcgis.com/">Data</a></li>-->
                <!--<li class="active"><a href="docs.html">Docs</a></li>-->
            </ul>
        </div><!-- /.navbar-collapse -->
    </div><!-- /.container-fluid -->
</nav>

<div id="banner-head" class="text-center">
    <div class="col-xs-12">
        <h1 class="text-center vertical-align">Documentation</h1>
        <hr>
        <!--<h4>Help us revitalize communities, create pathways to work, and connect hardworking Americans to a better quality of life</h4>-->
        <!--<h4>February 19<sup>th</sup>-21<sup>st</sup>, 2016</h4>-->
    </div>
</div>

<div class="spacer"></div>

<div id="toTop" style="">
    <a data-toggle="tooltip" data-placement="bottom" title="Back to Top" href="#"><i class="fa fa-arrow-up fa-3x"></i></a>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-3" id="leftCol">
            <ul class="nav nav-stacked" id="sidebar">
                <li><a href="#sec0">Introduction</a></li>
                <li><a href="#sec1">Example Queries</a></li>
                <li><a href="#sec2">Query Parameters</a></li>
                <li><a href="#sec3">Data Dictionaries</a></li>
                <ul>
                    <li><a href="#dd0">Location Affordability Index</a></li>
                    <!--<li><a href="#dd1">Test1</a></li>-->
                </ul>
                <!--<li><a href="#sec4">FAQs</a></li>-->
            </ul>

        </div>
        <!--<div class="hidden-md hidden-lg" id="leftColsm">-->
            <!--<ul class="nav nav-stacked">-->
                <!--<li><a href="#sec0">Section 0</a></li>-->
                <!--<li><a href="#sec1">Section 1</a></li>-->
                <!--<li><a href="#sec2">Section 2</a></li>-->
                <!--<li><a href="#sec3">Section 3</a></li>-->
                <!--<li><a href="#sec4">Section 4</a></li>-->
            <!--</ul>-->
        <!--</div>-->
        <div class="col-md-9" id="mainCol" style="background-color:white;padding-bottom:100px">

            <br>

            <h2 id="sec0">Celebrating Cities Public Data API Service</h2>

            <p> So you want to win that hackathon or build the next hot open data app? Follow this guide to get yourself started. Make sure you check out the more detailed resources in Socrata's <a href="dev.socrata.com">Dev Portal</a> when itâ€™s time to get in deep<p>

            <p>
                We are using Socrata's REST API, <a href="https://dev.socrata.com/consumers/getting-started.html">SODA API</a> . This service accepts several queries, including geospatially-enabled queries, which should allow you to make very specific requests.
            </p>
            <hr class="col-md-12">

            <p><strong>Getting Started:</strong></p>

            <p>
                All datasets are currently hosted on <a href="https://celebratingcities.data.socrata.com/">Socrata's Open Data portal</a> which provides the REST <a href="https://dev.socrata.com/consumers/getting-started.html">SODA API</a>.
            </p>
            <pre>http://services.arcgis.com/&ltthe layer's UID&gt/arcgis/rest/services/MultiFamilyProperties/FeatureServer/0/</pre>
            <p>
                You can find this address by navigating to the layer descritpion page
                <a href="http://celebratingcities.deloittegeo.opendata.arcgis.com/">here</a>,

                selecting 'Download Dataset' and copying the GeoService address from the API dropdown menu.
            </p>

            <p>
                The GeoService API link will provide the REST query service which also provides links
                to the service's metadata. To query the layer, you can either construct a query string manually or
                use the online form provided.
            </p>

            <p>To use the GeoService, navigate to the layer in question and pull the base url from the <a
                    href="http://celebratingcities.deloittegeo.opendata.arcgis.com/">opendata page</a>
            <pre>http://services.arcgis.com/VTyQ9soqVukalItT/ArcGIS/rest/services/FairMarketRents/FeatureServer/0/query?where=1=1&outFields=*&outSR=4326&objectids=1&f=geojson</pre>


            <h2 id="sec1">Example Queries</h2>
            <p>A good place to begin is in collecting all the HUD subsidized Multi-Family properties.</p>
            <p><strong>Subsidized Multifamily Properties</strong></p>

            <p>The corresponding field allows you to query for all HUD subsidized MF properties:</p>
            <pre>is_subsidized_ind='Y'</pre>

            <p>
                To construct the query, we'll take the base URL, and replace the where statement "1=1"
                with any valid SQL where statement. So for this example, we'd construct this query:
            </p>
            <pre>http://services.arcgis.com/VTyQ9soqVukalItT/ArcGIS/rest/services/MultiFamilyProperties/FeatureServer/0/query?where=IS_SUBSIDIZED_IND='Y'&outFields=*&outSR=4326&objectids=1&f=geojson</pre>



            <p><strong>Project-based Section 8 Properties</strong></p>

            <p>A logical second step would be to query the Multi-Family Properties layer for low income, and the corresponding field for project-based Section 8 properties is: </p>
            <pre>is_sec8_ind='Y'</pre>
            <p>
                so the query http string that returns the data in geojson looks like this:
            </p>
            <pre id="elderly">http://services.arcgis.com/VTyQ9soqVukalItT/arcgis/rest/services/MultiFamilyProperties/FeatureServer/0//query?<strong>where=is_sec8_ind='Y'</strong>&f=pgeojson</pre>
            <p>
                Since we're focusing on Seattle, here's how we would set our input geometry:
            </p>
            <pre>{"xmin":-13676570.60682338,"ymin":6018679.182711435,"xmax":-13559316.205433873,"ymax":6064541.399682558,"spatialReference":{"wkid":102100}}</pre>
            <p>
                We then include this directly in our query using the geometry parameter:
            </p>
            <pre>http://services.arcgis.com/VTyQ9soqVukalItT/arcgis/rest/services/MultiFamilyProperties/FeatureServer/0/query?where=is_sec8_ind%3D%27Y%27&<strong>geometry={"xmin":-13676570.60682338,"ymin":6018679.182711435,"xmax":-13559316.205433873,"ymax":6064541.399682558,"spatialReference":{"wkid":102100}}</strong>&f=pgeojson</pre>

            <p><strong>Multifamily Elderly and Disabled Properties</strong></p>

            <p>
                For this query, we'll need to combine a few different criteria. These include:
            </p>
            <pre id="allquery">(1) is_sec8_202='Y'<br>(2) IS_811_CAPITAL_ADVANCE_IND='Y'<br>(3) IS_PAC_811_IND='Y'<br>(4) IS_PRAC_811_IND='Y'</pre>
            <p>
                To combine critera, we can use logic statments in the URL call. To include this, add the criteria
                to the where statement with AND/OR between each criteria, as shown in the example below:
            </p>
            <pre>http://services.arcgis.com/VTyQ9soqVukalItT/arcgis/rest/services/MultiFamilyProperties/FeatureServer/0/query?<strong>where=IS_811_CAPITAL_ADVANCE_IND='Y'+OR+IS_PAC_811_IND='Y'+OR+IS_PRAC_811_IND='Y'</strong>&f=pgeojson</pre>
            <p>
                Lastly, lets trim the results down to return Seattle results only.
            </p>
            <pre>http://services.arcgis.com/VTyQ9soqVukalItT/arcgis/rest/services/MultiFamilyProperties/FeatureServer/0/query?<strong>where=HUB_NAME_TEXT='Seattle'+AND+(IS_811_CAPITAL_ADVANCE_IND='Y'+OR+IS_PAC_811_IND='Y'+OR+IS_PRAC_811_IND='Y')</strong>&f=pgeojson</pre>

            <hr>

            <h2 id="sec2">All Query Parameters</h2>
            <div class="table-responsive">
                <table class="table">
                <thead>
                <tr>
                    <th>Parameter</th>
                    <th>Description</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Where</td>
                    <td>A where clause for the query filter. Any legal SQL where clause operating on the fields
                        in the layer is allowed.
                    </td>
                </tr>
                <tr>
                    <td>Object IDs</td>
                    <td>The object IDs of this layer/table to be queried.</td>
                </tr>
                <tr>
                    <td>Time</td>
                    <td>The time instant or the time extent to query.<br>
                        <strong>Time instant</strong><br>
                        <em>Syntax:&nbsp</em> <span class="code">time=timeInstant</span><br>
                <em>Example:&nbsp</em><span class="code"> time=1199145600000</span><br>
                <strong>Time extent</strong><br>
                <em>Syntax:&nbsp</em> <span class="code"> time=startTime, endTime</span><br>
                <em>Example:&nbsp</em><span class="code"> time=1199145600000, 1230768000000</span><br>
                </td>
                </tr>
                <tr>
                    <td>Input Geometry</td>
                    <td>
                        The geometry to apply as the spatial filter. The structure of the geometry
                        is the same as the structure of the json geometry objects returned by the
                        ArcGIS REST API. In addition to the json structures, for envelopes and points,
                        you can specify the geometry with a simpler comma-separated syntax.<br>
                        <em>Syntax:</em><br>
                        <ul style="margin-left:15px">
                            <li>json structures:&nbsp <span class="code">geometryType=&ltgeometryType&gt&geometry={geometry}</span>
                            </li>
                            <li>Envelope simple syntax:&nbsp <span class="code">geometryType=esriGeometryEnvelope&geometry=&ltxmin&gt,&ltymin&gt,&ltxmax&gt,&ltymax&gt}</span>
                            </li>
                            <li>Point simple syntax:&nbsp <span class="code">geometryType=esriGeometryPoint&geometry=&ltx&gt,&lty&gt</span>
                            </li>
                        </ul>
                        <em>Examples:</em><br>
                        <ul style="margin-left:15px">
                            <li><span class="code">geometryType=&ltgeometryType&gt&geometry={xmin: -104, ymin: 35.6, xmax: -94.32, ymax: 41}</span>
                            </li>
                            <li><span class="code">geometryType=esriGeometryEnvelope&geometry=-104,35.6,-94.32,41</span>
                            </li>
                            <li><span class="code">geometryType=esriGeometryPoint&geometry=-104,35.6</span></li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Geometry Type</td>
                    <td>
                        The type of geometry specified by the geometry parameter. The geometry type can be an envelope,
                        point, line, or polygon. The default geometry type is an envelope.
                        <br>
                        <em>Values:</em><span class="code">&nbspesriGeometryPoint | esriGeometryMultipoint | esriGeometryPolyline | esriGeometryPolygon | esriGeometryEnvelope</span>
                    </td>

                </tr>
                <tr>
                    <td>Input Spatial Reference</td>
                    <td>
                        The spatial relationship to be applied on the input geometry while performing the query. The
                        supported spatial relationships include intersects, contains, envelope intersects, within, etc.
                        The default spatial relationship is intersects (esriSpatialRelIntersects).
                        <em>Options are:</em>&nbsp intersects, contains, crosses, envelope intersects, index intersects,
                        overlaps,
                        touches, and within.
                    </td>
                </tr>
                <tr>
                    <td>Distance</td>
                    <td>Distance to buffer input geometry.</td>
                </tr>
                <tr>
                    <td>Units</td>
                    <td>Return distance values in the specified units. Options are meters, miles, feet, kilometers,
                        nautical miles, and US nautical miles.
                    </td>
                </tr>
                <tr>
                    <td>Out Fields</td>
                    <td>Attribute fields to include in response. Default is all (*).</td>
                </tr>
                <tr>
                    <td>Return Geometry</td>
                    <td>Boolean parameter. If 'true', each feature in the FeatureSet includes the geometry.</td>
                </tr>
                <tr>
                    <td>Max Allowable Offset</td>
                    <td>The maximum allowable offset used for generalizing geometries returned by the query operation.
                    </td>
                </tr>
                <tr>
                    <td>Geometry Precision</td>
                    <td>Specify the number of decimal places for the geometries returned by the query operation.</td>
                </tr>
                <tr>
                    <td>Output Spatial Reference</td>
                    <td>The spatial reference for the returned geometry.</td>
                </tr>
                <tr>
                    <td>Return IDs Only</td>
                    <td> If true, the response only includes an array of object IDs. Otherwise the response is a feature
                        set. The default is false.
                    </td>
                </tr>
                <tr>
                    <td>Return Count Only</td>
                    <td>If true, the response only includes the count (number of features/records) that would be
                        returned by a query. Otherwise the response is a feature set. The default is false. This option
                        supersedes the returnIdsOnly parameter.
                    </td>
                </tr>
                <tr>
                    <td>Return Extent Only</td>
                    <td>Boolean parameter set to return the query features extent only.</td>
                </tr>
                <tr>
                    <td>Order By Fields</td>
                    <td>One or more field names using the features/records that need to be ordered. Use ASC or DESC for
                        ascending or desending order respectively.
                    </td>
                </tr>
                <tr>
                    <td>Group By Fields</td>
                    <td>Group by fields (for statistics).</td>
                </tr>
                <tr>
                    <td>Output Statistics</td>
                    <td>The definitions for one or more field-based statistics to be calculated.</td>
                </tr>
                <tr>
                    <td>Result Offset</td>
                    <td>This option can be used for fetching query results by skipping the specified number of records
                        and starts from the next record (i.e.resultOffset + 1th). The Default is 0.
                    </td>
                </tr>
                <tr>
                    <td>Result Record Count</td>
                    <td>This option can be used for fetching query results up to the resultRecordCount specified. When
                        resultOffset is specified but this parameter is not, map service defaults it to maxRecordCount.
                        The maximum value for this parameter is the value of the layer's maxRecordCount property.
                    </td>
                </tr>
                <tr>
                    <td>ReturnZ</td>
                    <td>If true, the Z values will be included in the results if the features have Z values. Otherwise Z
                        values are not returned. The default is false.
                    </td>
                </tr>
                <tr>
                    <td>ReturnM</td>
                    <td>If true, M values will be included in the results if the features have m values. Otherwise, M
                        values are not returned. The default is false.
                    </td>
                </tr>
                <tr>
                    <td>Quantization Parameters</td>
                    <td>Used to project the geometry onto a virtual grid, likely representing pixels on the screen.</td>
                </tr>
                <tr>
                    <td>Format</td>
                    <td>The response format. Default format is html but options include html, json, and geojson</td>
                </tr>
                </tbody>
                </table>

            </div>

            <hr>
<div id="footerwrap">
    <div class="container text-center">
        <!--<div class="row">-->
        <div class="col-md-6">
            <h4>About the Event</h4>

            <div class="hline-w"></div>
            <p>
                Since day one, our mission has been to connect people with reliable rides through the use of data and
                technology. As our footprint has grown throughout the years, so has our ability to use the Uber
                network in different ways.
            </p>
        </div>
        <div class="col-md-6">
            <h4>Social Links</h4>

            <div class="hline-w"></div>
            <p id="slinks">
                <a href="https://twitter.com/Uber_DC" target="_blank"><i class="fa fa-twitter"></i></a>
                <a href="https://www.facebook.com/uber" target="_blank"><i class="fa fa-facebook"></i></a>
                <a href="https://www.linkedin.com/company/uber-com" target="_blank"><i class="fa fa-linkedin"></i></a>
                <a href="https://instagram.com/Uber_DC" target="_blank"><i class="fa fa-instagram"></i></a>
            </p>
        </div>
        <!--<div class="col-lg-4">-->
        <!--<h4>Event Location</h4>-->

        <!--<div class="hline-w"></div>-->
        <!--<p>-->
        <!--1717 Rhode Island Ave<br/>-->
        <!--2nd Floor<br/>-->
        <!--Washington, DC 20036<br/>-->
        <!--</p>-->
        <!--</div>-->
    </div>
</div>

<script>
    $(window).bind('scroll', function (e) {
        parallaxScroll();
    });

    function parallaxScroll() {
        var scrolled = $(window).scrollTop(),
            w = window.innerWidth;
        $('#banner-head').css('top', (0 - (scrolled * .28)) + 'px');
        if(w>991){
            $('#leftCol').css('top', scrolled + 'px');
        } else {
            $('#leftCol').css('top', '0px');
        }
    }

    $(function() {
        $('a[href*=#]:not([href=#])').click(function() {
            if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
                if (target.length) {
                    $('html,body').animate({
                        scrollTop: (target.offset().top-60)
                    }, 1000);
                    return false;
                }
            }
        });
    });

</script>

<!--Toggle Controls-->
<script>
    $('.table-head').click(function () {
        $(this).nextUntil('.table-head').slideToggle(0);
    });

    $(window).bind('load', function () {
        $('.table-head').nextUntil('.table-head').slideToggle(0);
    });

</script>

<script src="js/search.js"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-73708134-1', 'auto');
    ga('send', 'pageview');
</script>
</body>
</html>